<!DOCTYPE html>
<html layout:decorate="~{layout}">
	<head>
		<meta charset="UTF-8" />
		<script>
			function cadastrarRegistro() {
				var url = "http://localhost:8080/RegistroClinico/cadastrarpac/" + $("#id").val();
				document.location.href = url;
			}
		</script>
		<script>
			function busca() {
				if($("#txtBusca").val() != ""){
					var url2 = "http://localhost:8080/RegistroClinico/listar/" + $("#dropdownMenu2").val() + "/" + $("#txtBusca").val();
					document.location.href = url2;
				}
			}
		</script>
		<script>
			function muda() {
				$("#dropdownMenu2").text("Prontuário");
				$("#dropdownMenu2").val("1");
			}
			function muda2() {
				$("#dropdownMenu2").text("Nome");
				$("#dropdownMenu2").val("2");
			}
		</script>
	</head>

	<body>
		<div layout:fragment="corpo">
			<nav class="navbar navbar-expand-lg navbar-light" th:fragment="content">
				<div class="collapse navbar-collapse" id="conteudoNavbarSuportado">
					<div class="dropdown">
						<a class="dropbtn" data-toggle="dropdown" href="#"><i class="fa fa-plus fa-fw"></i>Novo</a>
						<div class="dropdown-content">
							<a href="#">Agendamento</a>
							<a href="/pacientes/cadastrar">Paciente</a>
							<a href="#">Funcionário</a>
							<a href="/convenios/cadastrar">Convênio</a>
							<a href="#">Exame</a>
							<a href="#">Laboratório</a>
						</div>
					</div>
					<div class="btn-group">
						<button type="button" class="btn" id="dropdownMenu2" value="1">Prontuário</button>
						<button type="button" class="btn dropdown-toggle dropdown-toggle-split" id="dropdownMenu3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<span class="sr-only">Toggle Dropdown</span>
						</button>
						<div class="dropdown-menu">
							<button class="dropdown-item" type="button" value="1" onclick="muda()">Prontuário</button>
							<button class="dropdown-item" type="button" value="2" onclick="muda2()">Nome</button>
						</div>
					</div>
					<div id="divBusca">
						<input type="text" id="txtBusca" placeholder="Buscar..." />
						<button id="btn_search" class="btn"><i class="fas fa-search" onclick="busca()"></i></button>
					</div>
					<div class="collapse navbar-collapse justify-content-end login">
						<ul class="navbar-nav">
							<li class="nav-item">
								<a class="mr-4">Bem vindo</a>
							</li>
							<li class="nav-item">
								<a href="#" class="decoration"><i class="fas fa-sign-out-alt"></i> Sair</a>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		
			<div class="container-fluid" style="width: 98%">
				<h3 style="display: inline;">Lista | <strong>Registros Clínicos</strong></h3>
				<a class="btn btn-success float-right" href="#" onclick="cadastrarRegistro()" role="button"><i class="fas fa-plus"></i> Novo Registro</a>
				<div class="card" style="margin-top: 25px; padding: 0px;">
					<div class="card-body">
						<table class="table table-borderless">
							<thead>
								<tr style="color: #5d6266; font-size: 1em;">
									<th>Nº Registro</th>
									<th>Paciente</th>
									<th>Descrição</th>
									<th>Data</th>
									<th>Hora</th>
								</tr>
							</thead>
							<tbody th:each="r : ${registro}">
								<tr class="conteudo" style="font-size: 1em;">
									<td><a th:text="${r.id}"></a></td>
									<td><a th:text="${r.paciente_id.nome}"></a></td>
									<td><a th:text="${r.descricao}"/></a></td>
									<td><a th:text="${#temporals.format(r.data, 'dd/MM/yyyy')}"></a></td>
									<td><a th:text="${r.hora}"></a></td>
									<td><input type="hidden" id="id" th:value="${r.paciente_id.id}"></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</body>

</html>